<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rahmat Fadhila - Home</title>
    <link rel="stylesheet" href="css/home.css">
    <!-- Font Awesome dengan loading yang dioptimalkan -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'">
    <!-- Preload gambar penting -->
    <link rel="preload" href="img/Fotoku.png" as="image">
</head>
<body>
    <!-- Page transition overlay -->
    <div class="page-transition-overlay"></div>
    <div class="loading-indicator">
        <div class="loading-spinner"></div>
    </div>

    <!-- Entrance animation -->
    <div class="rain-entrance" id="entranceAnimation">
        <div class="entrance-rain" id="entranceRain"></div>
        <div class="logo-entrance">Rainmate</div>
        <div class="tagline-entrance">Creating ideas under the rain</div>
    </div>

    <!-- Rain effect container -->
    <div class="rain-container"></div>
    
    <nav class="navbar page-element">
        <div class="logo">Rainmate</div>
        <ul class="nav-links">
            <li><a href="index.html" class="page-link" data-transition="true">Home</a></li>
            <li><a href="about.html" class="page-link" data-transition="true">About</a></li>
            <li><a href="blog.html" class="page-link" data-transition="true">Blog</a></li>
            <li><a href="portfolio.html" class="page-link" data-transition="true">Portofolio</a></li>
            <li><a href="contact.html" class="page-link" data-transition="true">Contact</a></li>
        </ul>
        <div class="search-box">
            <button class="search-btn"><i class="fas fa-search"></i></button>
        </div>
    </nav>
    
    <main>
        <div class="hero-section page-element">
            <h1>Hi, i'm Rahmat</h1>
            <h2>Creating ideas under the rain</h2>
        </div>
        
        <div class="content-container">
            <div class="left-content page-element">
                <p class="description">
                    someone who believes that, just like rain, every moment and thought has its own story. Here, I share my ideas, creativity, and small reflections about life, hoping they can bring a little calm and inspiration to anyone who stops by.
                </p>
                <div class="arrow-icon">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </div>
            
            <div class="center-content page-element">
                <div class="photo-stack">
                    <div class="lightning-container"></div>
                    <div class="profile-rain"></div>
                    <img src="img/Fotoku.png" alt="Background" class="background-photo">
                    <img src="img/Fotoku.png" alt="Rahmat Fadhila" class="profile-photo">
                </div>
            </div>
            
            <div class="right-content page-element">
                <div class="welcome-box">
                    <p>Welcome to my little space on the internet.</p>
                    <p class="highlight">I'm Rahmat</p>
                    <div class="line-separator"></div>
                    <a href="about.html" class="cta-button page-link" data-transition="true">Clik To Know <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
        
        <div class="weather page-element">
            <i class="fas fa-cloud-rain"></i> 18° C
        </div>
    </main>

    <footer class="footer page-element">
        <div class="rain-footer"></div>
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-logo">
                    <h3>Rainmate</h3>
                    <p>Creating ideas under the rain</p>
                </div>
                <div class="footer-social">
                    <a href="https://wa.me/6281332147614" target="_blank" aria-label="WhatsApp" class="social-btn">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.instagram.com/rahmatfdhla/" target="_blank" aria-label="Instagram" class="social-btn">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://facebook.com/rahmat.fadhila" target="_blank" aria-label="Facebook" class="social-btn">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://t.me/rahmatfadhila" target="_blank" aria-label="Telegram" class="social-btn">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Rainmate. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript langsung di HTML -->
    <script>
        // Deteksi performa perangkat untuk menyesuaikan efek
        function detectPerformance() {
            // Deteksi perangkat low-end
            const isLowEndDevice = () => {
                const processors = navigator.hardwareConcurrency || 1;
                const limitedMemory = navigator.deviceMemory && navigator.deviceMemory < 4;
                return processors <= 2 || limitedMemory;
            };
            
            // Deteksi koneksi lambat
            const isSlowConnection = () => {
                if ('connection' in navigator) {
                    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                    return connection && (connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g' || connection.saveData);
                }
                return false;
            };
            
            // Sesuaikan berdasarkan perangkat dan koneksi
            if (isLowEndDevice() || isSlowConnection()) {
                document.body.classList.add('low-performance');
            }
            
            // Tentukan jumlah elemen hujan berdasarkan performa
            return {
                rainDrops: isLowEndDevice() ? 30 : 80,
                entranceRainDrops: isLowEndDevice() ? 20 : 50,
                profileRainDrops: isLowEndDevice() ? 10 : 25
            };
        }

        // Fungsi untuk membuat animasi entrance hujan
        function createEntranceRain() {
            const entranceRain = document.getElementById('entranceRain');
            if (!entranceRain) return;
            
            const performanceSettings = detectPerformance();
            const numberOfDrops = performanceSettings.entranceRainDrops;
            
            for (let i = 0; i < numberOfDrops; i++) {
                const drop = document.createElement('div');
                drop.className = 'entrance-drop';
                
                // Random position
                const posX = Math.floor(Math.random() * window.innerWidth);
                drop.style.left = posX + 'px';
                
                // Random falling speed dan delay
                const fallDuration = 0.8 + Math.random();
                drop.style.animationDuration = fallDuration + 's';
                
                const delay = Math.random() * 2;
                drop.style.animationDelay = delay + 's';
                
                // Random size
                const height = 10 + Math.random() * 15;
                drop.style.height = height + 'px';
                
                entranceRain.appendChild(drop);
            }
        }

        // Fungsi untuk menyembunyikan animasi entrance
        function hideEntranceAnimation() {
            const entranceAnimation = document.getElementById('entranceAnimation');
            if (!entranceAnimation) return;
            
            entranceAnimation.style.opacity = '0';
            
            setTimeout(() => {
                entranceAnimation.style.display = 'none';
                sessionStorage.setItem('entranceSeen', 'true');
            }, 1000);
        }

        // Fungsi untuk menampilkan elemen halaman dengan animasi
        function animatePageElements() {
            const elements = document.querySelectorAll('.page-element');
            elements.forEach(element => {
                element.classList.add('visible');
            });
        }

        // Fungsi untuk membuat efek hujan utama
        function createRain() {
            const rainContainer = document.querySelector('.rain-container');
            const rainFooter = document.querySelector('.rain-footer');
            if (!rainContainer || !rainFooter) return;
            
            const performanceSettings = detectPerformance();
            const numberOfDrops = performanceSettings.rainDrops;
            
            // Hapus semua elemen yang mungkin sudah ada
            rainContainer.innerHTML = '';
            rainFooter.innerHTML = '';
            
            // Buat rain drops untuk container utama
            for (let i = 0; i < numberOfDrops; i++) {
                createRainDrop(rainContainer, true);
            }
            
            // Buat rain drops untuk footer
            for (let i = 0; i < numberOfDrops / 2; i++) {
                createRainDrop(rainFooter, false);
            }
        }

        // Fungsi untuk membuat rain drop individual
        function createRainDrop(container, isMainRain) {
            const drop = document.createElement('div');
            drop.className = 'rain-drop';
            
            // Random position
            const posX = Math.floor(Math.random() * window.innerWidth);
            drop.style.left = posX + 'px';
            
            // Random falling speed
            const fallDuration = isMainRain ? 
                (0.8 + Math.random() * 0.7) : 
                (0.5 + Math.random() * 0.5);
            drop.style.animationDuration = fallDuration + 's';
            
            // Random opacity
            const opacity = isMainRain ? 
                (0.2 + Math.random() * 0.4) : 
                (0.1 + Math.random() * 0.3);
            drop.style.opacity = opacity;
            
            // Random size
            const size = isMainRain ? 
                (1 + Math.random()) : 
                (0.5 + Math.random() * 0.5);
            drop.style.width = size + 'px';
            drop.style.height = isMainRain ? (size * 15) + 'px' : (size * 10) + 'px';
            
            // Tambahkan animasi miring untuk beberapa drops
            if (Math.random() > 0.7) {
                drop.style.animation = `rain-fall-angled ${fallDuration}s linear infinite`;
            }
            
            container.appendChild(drop);
        }

        // Fungsi untuk membuat hujan di sekitar profil
        function createProfileRain() {
            const profileRain = document.querySelector('.profile-rain');
            if (!profileRain) return;
            
            const performanceSettings = detectPerformance();
            const numberOfDrops = performanceSettings.profileRainDrops;
            
            for (let i = 0; i < numberOfDrops; i++) {
                const drop = document.createElement('div');
                drop.className = 'profile-rain-drop';
                
                // Posisi
                const posX = Math.floor(Math.random() * 100);
                drop.style.left = posX + '%';
                
                // Kecepatan jatuh
                const fallDuration = 0.8 + Math.random();
                drop.style.animationDuration = fallDuration + 's';
                
                // Ukuran
                const size = 1 + Math.random();
                drop.style.width = size + 'px';
                drop.style.height = (size * 6) + 'px';
                
                profileRain.appendChild(drop);
            }
        }

        // Fungsi untuk membuat efek kilat
        function createLightning() {
            const lightningContainer = document.querySelector('.lightning-container');
            if (!lightningContainer) return;
            
            function flashLightning() {
                const lightning = document.createElement('div');
                lightning.className = 'lightning';
                
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                lightning.style.left = posX + '%';
                lightning.style.top = posY + '%';
                
                lightningContainer.appendChild(lightning);
                
                // Hapus elemen kilat setelah animasi selesai
                setTimeout(() => {
                    lightning.remove();
                }, 200);
                
                // Jeda yang lebih lama antara kilat
                const nextFlash = 5000 + Math.random() * 8000;
                setTimeout(flashLightning, nextFlash);
            }
            
            // Mulai animasi kilat dengan jeda awal
            setTimeout(flashLightning, 3000);
        }

        // Fungsi untuk mengatur transisi halaman
        function setupPageTransitions() {
            const transitionLinks = document.querySelectorAll('a[data-transition="true"]');
            const overlay = document.querySelector('.page-transition-overlay');
            
            transitionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href');
                    
                    overlay.classList.add('active');
                    
                    // Navigasi setelah animasi overlay
                    setTimeout(() => {
                        sessionStorage.setItem('internalNavigation', 'true');
                        window.location.href = target;
                    }, 300);
                });
            });
        }

        // Fungsi untuk mengoptimalkan animasi selama scroll
        function optimizeOnScroll() {
            let scrollTimeout;
            
            window.addEventListener('scroll', () => {
                // Tambahkan class reduced ke container hujan
                document.body.classList.add('reduced');
                
                // Clear timeout sebelumnya
                clearTimeout(scrollTimeout);
                
                // Set timeout baru untuk menghapus class reduced
                scrollTimeout = setTimeout(() => {
                    document.body.classList.remove('reduced');
                }, 300);
            });
        }

        // Event Handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Setup transisi halaman
            setupPageTransitions();
            
            // Optimasi selama scroll
            optimizeOnScroll();
        });

        // Load event handler
        window.addEventListener('load', function() {
            const overlay = document.querySelector('.page-transition-overlay');
            if (overlay) {
                overlay.classList.remove('active');
            }
            
            const entranceAnimation = document.getElementById('entranceAnimation');
            const entranceSeen = sessionStorage.getItem('entranceSeen');
            const internalNavigation = sessionStorage.getItem('internalNavigation');
            
            // Alur animasi berbeda untuk navigasi internal vs kunjungan pertama
            if (internalNavigation) {
                // Navigasi internal - hapus flag
                sessionStorage.removeItem('internalNavigation');
                
                if (entranceAnimation) {
                    entranceAnimation.style.display = 'none';
                }
                
                // Animasikan elemen halaman setelah delay pendek
                setTimeout(animatePageElements, 100);
                
                // Buat efek hujan dengan delay untuk performa lebih baik
                setTimeout(() => {
                    createRain();
                    createProfileRain();
                    createLightning();
                }, 300);
            } else {
                if (entranceSeen) {
                    // Sudah pernah mengunjungi - skip entrance
                    if (entranceAnimation) {
                        entranceAnimation.style.display = 'none';
                    }
                    
                    // Animasikan elemen halaman
                    setTimeout(animatePageElements, 100);
                    
                    // Buat efek hujan
                    setTimeout(() => {
                        createRain();
                        createProfileRain();
                        createLightning();
                    }, 300);
                } else {
                    // Kunjungan pertama - tampilkan entrance
                    createEntranceRain();
                    
                    // Sembunyikan entrance setelah beberapa detik
                    setTimeout(() => {
                        hideEntranceAnimation();
                        
                        // Animasikan elemen halaman setelah entrance
                        setTimeout(animatePageElements, 100);
                        
                        // Buat efek hujan
                        setTimeout(() => {
                            createRain();
                            createProfileRain();
                            createLightning();
                        }, 300);
                    }, 3000);
                }
            }
        });
    </script>
</body>
</html>