<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Rahmat Fadhila - Creating ideas under the rain. Berbagi ide, kreativitas, dan refleksi kecil tentang kehidupan.">
    <title>Rahmat Fadhila - Home</title>
    <link rel="stylesheet" href="css/home.css">
    <!-- Optimasi loading Font Awesome -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></noscript>
    <!-- Preload gambar penting -->
    <link rel="preload" href="img/Fotoku.png" as="image">
    <link rel="preload" href="img/Backround (1).png" as="image">
    <style>
        /* Static Navbar */
        .navbar {
            position: static;
            z-index: 100;
        }
        
        /* Animasi entrance yang ringan */
        .rain-entrance {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.5s ease-out;
        }
        
        .logo-entrance {
            color: #00e5ff;
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }
        
        .tagline-entrance {
            color: #fff;
            font-size: 1.2rem;
            text-align: center;
        }
        
        /* Animasi paused ketika halaman tidak terlihat */
        .animation-paused * {
            animation-play-state: paused !important;
        }
    </style>
</head>
<body>
    <!-- Page transition overlay -->
    <div class="page-transition-overlay"></div>
    <div class="loading-indicator">
        <div class="loading-spinner"></div>
    </div>

    <!-- Entrance animation yang lebih ringan -->
    <div class="rain-entrance" id="entranceAnimation">
        <div class="logo-entrance">Rainmate</div>
        <div class="tagline-entrance">Creating ideas under the rain</div>
    </div>

    <!-- Rain effect container -->
    <div class="rain-container"></div>
    
    <nav class="navbar page-element">
        <div class="logo">Rainmate</div>
        <ul class="nav-links">
            <li><a href="index.html" class="page-link" data-transition="true">Home</a></li>
            <li><a href="about.html" class="page-link" data-transition="true">About</a></li>
            <li><a href="blog.html" class="page-link" data-transition="true">Blog</a></li>
            <li><a href="portfolio.html" class="page-link" data-transition="true">Portofolio</a></li>
            <li><a href="contact.html" class="page-link" data-transition="true">Contact</a></li>
        </ul>
    </nav>
    
    <main>
        <div class="hero-section page-element">
            <h1>Hi, i'm Rahmat</h1>
            <h2>Creating ideas under the rain</h2>
        </div>
        
        <div class="content-container">
            <div class="left-content page-element">
                <p class="description">
                    someone who believes that, just like rain, every moment and thought has its own story. Here, I share my ideas, creativity, and small reflections about life, hoping they can bring a little calm and inspiration to anyone who stops by.
                </p>
                <div class="arrow-icon">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </div>
            
            <div class="center-content page-element">
                <div class="photo-stack">
                    <div class="lightning-container"></div>
                    <div class="profile-rain"></div>
                    <img src="img/Fotoku.png" alt="Background" class="background-photo" width="290" height="290">
                    <img src="img/Fotoku.png" alt="Rahmat Fadhila" class="profile-photo" width="290" height="290">
                </div>
            </div>
            
            <div class="right-content page-element">
                <div class="welcome-box">
                    <p>Welcome to my little space on the internet.</p>
                    <p class="highlight">I'm Rahmat</p>
                    <div class="line-separator"></div>
                    <a href="about.html" class="cta-button page-link" data-transition="true">Click To Know Me <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
        
        <div class="weather page-element">
            <i class="fas fa-cloud-rain"></i> 18° C
        </div>
    </main>

    <footer class="footer page-element">
        <div class="rain-footer"></div>
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-logo">
                    <h3>Rainmate</h3>
                    <p>Creating ideas under the rain</p>
                </div>
                <div class="footer-social">
                    <a href="https://wa.me/6281332147614" target="_blank" aria-label="WhatsApp" class="social-btn">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.instagram.com/rahmatfdhla/" target="_blank" aria-label="Instagram" class="social-btn">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://facebook.com/rahmat.fadhila" target="_blank" aria-label="Facebook" class="social-btn">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://t.me/rahmatfadhila" target="_blank" aria-label="Telegram" class="social-btn">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Rainmate. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript langsung di HTML -->
    <script>
        // Deteksi performa perangkat untuk menyesuaikan efek
        function detectPerformance() {
            // Deteksi perangkat low-end
            const isLowEndDevice = () => {
                const processors = navigator.hardwareConcurrency || 1;
                const limitedMemory = navigator.deviceMemory && navigator.deviceMemory < 4;
                return processors <= 2 || limitedMemory;
            };
            
            // Deteksi koneksi lambat
            const isSlowConnection = () => {
                if ('connection' in navigator) {
                    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                    return connection && (connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g' || connection.saveData);
                }
                return false;
            };
            
            // Sesuaikan berdasarkan perangkat dan koneksi
            if (isLowEndDevice() || isSlowConnection()) {
                document.body.classList.add('low-performance');
            }
            
            // Tentukan jumlah elemen hujan berdasarkan performa
            return {
                rainDrops: isLowEndDevice() ? 20 : 40,
                profileRainDrops: isLowEndDevice() ? 8 : 15
            };
        }

        // Fungsi untuk menyembunyikan animasi entrance yang lebih sederhana
        function hideEntranceAnimation() {
            const entranceAnimation = document.getElementById('entranceAnimation');
            if (!entranceAnimation) return;
            
            entranceAnimation.style.opacity = '0';
            
            setTimeout(() => {
                entranceAnimation.style.display = 'none';
                sessionStorage.setItem('entranceSeen', 'true');
            }, 500);
        }

        // Fungsi untuk menampilkan elemen halaman dengan animasi
        function animatePageElements() {
            const elements = document.querySelectorAll('.page-element');
            elements.forEach(element => {
                element.classList.add('visible');
            });
        }

        // Memindahkan createRainDrop ke luar sebagai helper function untuk mengurangi duplikasi
        function createRainDrop(isMainRain) {
            const drop = document.createElement('div');
            drop.className = 'rain-drop';
            
            // Random position
            const posX = Math.floor(Math.random() * window.innerWidth);
            drop.style.left = posX + 'px';
            
            // Random falling speed
            const fallDuration = isMainRain ? 
                (0.8 + Math.random() * 0.7) : 
                (0.5 + Math.random() * 0.5);
            drop.style.animationDuration = fallDuration + 's';
            
            // Random opacity
            const opacity = isMainRain ? 
                (0.2 + Math.random() * 0.4) : 
                (0.1 + Math.random() * 0.3);
            drop.style.opacity = opacity;
            
            // Random size
            const size = isMainRain ? 
                (1 + Math.random()) : 
                (0.5 + Math.random() * 0.5);
            drop.style.width = size + 'px';
            drop.style.height = isMainRain ? (size * 15) + 'px' : (size * 10) + 'px';
            
            // Tambahkan animasi miring untuk beberapa drops
            if (Math.random() > 0.7) {
                drop.style.animation = `rain-fall-angled ${fallDuration}s linear infinite`;
            }
            
            return drop;
        }

        // Fungsi untuk membuat efek hujan utama
        function createRain() {
            const rainContainer = document.querySelector('.rain-container');
            const rainFooter = document.querySelector('.rain-footer');
            if (!rainContainer || !rainFooter) return;
            
            const performanceSettings = detectPerformance();
            const numberOfDrops = performanceSettings.rainDrops;
            
            // Hapus semua elemen yang mungkin sudah ada
            rainContainer.innerHTML = '';
            rainFooter.innerHTML = '';
            
            // Menggunakan fragments untuk performa lebih baik
            const mainFragment = document.createDocumentFragment();
            const footerFragment = document.createDocumentFragment();
            
            // Buat rain drops untuk container utama
            for (let i = 0; i < numberOfDrops; i++) {
                mainFragment.appendChild(createRainDrop(true));
            }
            
            // Buat rain drops untuk footer
            for (let i = 0; i < numberOfDrops / 2; i++) {
                footerFragment.appendChild(createRainDrop(false));
            }
            
            rainContainer.appendChild(mainFragment);
            rainFooter.appendChild(footerFragment);
        }

        // Fungsi untuk membuat hujan di sekitar profil
        function createProfileRain() {
            const profileRain = document.querySelector('.profile-rain');
            if (!profileRain) return;
            
            const performanceSettings = detectPerformance();
            const numberOfDrops = performanceSettings.profileRainDrops;
            
            const fragment = document.createDocumentFragment();
            
            for (let i = 0; i < numberOfDrops; i++) {
                const drop = document.createElement('div');
                drop.className = 'profile-rain-drop';
                
                // Posisi
                const posX = Math.floor(Math.random() * 100);
                drop.style.left = posX + '%';
                
                // Kecepatan jatuh
                const fallDuration = 0.8 + Math.random();
                drop.style.animationDuration = fallDuration + 's';
                
                // Ukuran
                const size = 1 + Math.random();
                drop.style.width = size + 'px';
                drop.style.height = (size * 6) + 'px';
                
                fragment.appendChild(drop);
            }
            
            profileRain.appendChild(fragment);
        }

        // Fungsi untuk creating lightning effect
        function createLightning() {
            const lightningContainer = document.querySelector('.lightning-container');
            if (!lightningContainer) return;
            
            // Fungsi untuk menambahkan kilat
            const addLightning = () => {
                // Jika mode performa rendah, kurangi efek kilat
                if (document.body.classList.contains('low-performance')) {
                    return;
                }
                
                const lightning = document.createElement('div');
                lightning.className = 'lightning';
                
                // Random posisi
                const posX = Math.floor(Math.random() * 100);
                const posY = Math.floor(Math.random() * 100);
                lightning.style.left = posX + '%';
                lightning.style.top = posY + '%';
                
                lightningContainer.appendChild(lightning);
                
                // Hapus elemen kilat setelah animasi selesai
                setTimeout(() => {
                    if (lightning.parentNode === lightningContainer) {
                        lightningContainer.removeChild(lightning);
                    }
                }, 200);
            };
            
            // Tambahkan kilat secara acak
            const interval = setInterval(() => {
                // Hanya tambahkan kilat jika halaman terlihat
                if (document.visibilityState === 'visible' && Math.random() > 0.7) {
                    addLightning();
                }
            }, 5000);
            
            // Simpan interval ke window agar bisa dibersihkan saat dibutuhkan
            window.lightningInterval = interval;
        }

        // Fungsi untuk mengatur transisi halaman
        function setupPageTransitions() {
            const transitionLinks = document.querySelectorAll('a[data-transition="true"]');
            const overlay = document.querySelector('.page-transition-overlay');
            
            transitionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href');
                    
                    overlay.classList.add('active');
                    
                    // Navigasi setelah animasi overlay
                    setTimeout(() => {
                        sessionStorage.setItem('internalNavigation', 'true');
                        window.location.href = target;
                    }, 300);
                });
            });
        }

        // Fungsi untuk mengoptimalkan animasi selama scroll
        function optimizeOnScroll() {
            // Menggunakan throttling untuk optimasi
            let scrollThrottleTimeout;
            const throttleDuration = 100;
            
            window.addEventListener('scroll', () => {
                // Skip jika sudah dalam throttle
                if (scrollThrottleTimeout) return;
                
                scrollThrottleTimeout = setTimeout(() => {
                    // Tambahkan class reduced ke container hujan
                    document.body.classList.add('reduced');
                    
                    // Hapus class setelah scroll selesai
                    clearTimeout(window.scrollEndTimeout);
                    window.scrollEndTimeout = setTimeout(() => {
                        document.body.classList.remove('reduced');
                        scrollThrottleTimeout = null;
                    }, 300);
                    
                }, throttleDuration);
            }, { passive: true });
        }

        // Fungsi callback visibility API
        function handleVisibilityChange() {
            if (document.visibilityState === 'hidden') {
                // Pause animations when page is not visible
                document.body.classList.add('animation-paused');
            } else {
                // Resume animations when page is visible again
                document.body.classList.remove('animation-paused');
            }
        }

        // DOMContentLoaded event - minimal initial setup
        document.addEventListener('DOMContentLoaded', function() {
            // Setup page transitions only - delaying rest to after load
            setupPageTransitions();
            
            // Listen for visibility changes
            document.addEventListener('visibilitychange', handleVisibilityChange);
        });

        // Load event - complete initialization after everything loaded
        window.addEventListener('load', function() {
            const overlay = document.querySelector('.page-transition-overlay');
            if (overlay) {
                overlay.classList.remove('active');
            }
            
            const entranceAnimation = document.getElementById('entranceAnimation');
            const entranceSeen = sessionStorage.getItem('entranceSeen');
            const internalNavigation = sessionStorage.getItem('internalNavigation');
            
            // Optimize for animation on scroll
            optimizeOnScroll();
            
            // Delayed initialization based on navigation type
            if (internalNavigation) {
                // Internal navigation - remove flag
                sessionStorage.removeItem('internalNavigation');
                
                if (entranceAnimation) {
                    entranceAnimation.style.display = 'none';
                }
                
                // Animasikan elemen halaman
                requestAnimationFrame(animatePageElements);
                
                // Create rain effects with slight delay
                setTimeout(() => {
                    createRain();
                    createProfileRain();
                    createLightning();
                }, 300);
            } else {
                if (entranceSeen) {
                    // Skip entrance for returning visitors
                    if (entranceAnimation) {
                        entranceAnimation.style.display = 'none';
                    }
                    
                    requestAnimationFrame(animatePageElements);
                    
                    // Create rain effects with slight delay
                    setTimeout(() => {
                        createRain();
                        createProfileRain();
                        createLightning();
                    }, 300);
                } else {
                    // First visit - show entrance
                    // Hide entrance after a short time
                    setTimeout(() => {
                        hideEntranceAnimation();
                        
                        // Animate page elements
                        requestAnimationFrame(animatePageElements);
                        
                        // Create rain effects
                        setTimeout(() => {
                            createRain();
                            createProfileRain();
                            createLightning();
                        }, 300);
                    }, 1500); // Reduced from 3000 to 1500
                }
            }
        });
    </script>
</body>
</html>